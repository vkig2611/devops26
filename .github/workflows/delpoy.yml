name: Zip and Send Notification.txt to Slack

on:
  push:
    branches:
      - main

jobs:
  zip-and-send:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repository
      - name: Checkout code
        uses: actions/checkout@v3

      # Step 2: Zip the notification.txt file
      - name: Zip notification.txt
        run: |
          zip notification.zip notification.txt

      # Step 3: Upload the zipped file to Slack
      - name: Send zip file to Slack
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}  # Store your Slack token in GitHub Secrets
        run: |
          curl -F file=@notification.zip \
               -F channels=#your-channel-name \
               -F initial_comment="Latest API test collection is attached! ï¿½" \
               -H "Authorization: Bearer $SLACK_BOT_TOKEN" \
               https://slack.com/api/files.upload
