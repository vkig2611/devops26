name: Zip and Send API Test Collections to Slack

on:
  push:
    branches:
      - main

jobs:
  zip-and-send:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repository
      - name: Checkout code
        uses: actions/checkout@v3

      # Step 2: Locate and zip the text files
      - name: Zip text files
        run: |
          mkdir -p api_tests
          cp path/to/your/text/files/*.txt api_tests/
          zip -r api_tests.zip api_tests/

      # Step 3: Upload the zipped file to Slack
      - name: Send zip file to Slack
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}  # Store your Slack token in GitHub Secrets
        run: |
          curl -F file=@api_tests.zip \
               -F channels=#your-channel-name \
               -F initial_comment="Latest API test collections are attached! ðŸš€" \
               -H "Authorization: Bearer $SLACK_BOT_TOKEN" \
               https://slack.com/api/files.upload
